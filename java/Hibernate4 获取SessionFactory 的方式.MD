<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	下载最新的Hibernate 正式版Hibernate.4.2.2.Final。
</p>
<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	如果你是用maven的话就是
</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:#F5F5F5;border:1px solid #CCCCCC;overflow:auto;white-space:normal;font-family:&quot;">
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:&quot;"><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">1</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&lt;</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">dependency</span><span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&gt;</span> <span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">2</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&lt;</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">groupId</span><span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&gt;</span>org.hibernate<span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&lt;/</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">groupId</span><span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&gt;</span> <span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">3</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&lt;</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">artifactId</span><span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&gt;</span>hibernate-core<span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&lt;/</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">artifactId</span><span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&gt;</span> <span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">4</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&lt;</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">version</span><span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&gt;</span>4.2.2.Final<span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&lt;/</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">version</span><span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&gt;</span> <span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">5</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&lt;/</span><span style="margin:0px;padding:0px;color:#800000;line-height:1.5 !important;">dependency</span><span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">&gt;</span></pre>
</div>
<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	发现Hibernate4已经将configuration的buildSessionFactory方法已经划线了，说明已经过时了。
</p>
<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	<img src="http://images.cnitblog.com/blog/82753/201305/27160506-f01333cad0aa4a55a32b73708a94c5b4.png" alt="" style="margin:0px;padding:0px;max-width:900px;" /> 
</p>
<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	后来参看hibernate源码。以及API帮助文档，发现Hibernate4新增了一个接口ServiceRegistry，
</p>
<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	所有基于Hibernate的配置或者服务都必须统一向这个ServiceRegistry注册后才能生效。
</p>
<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	所以不难看出&nbsp;Hibernate4的配置入口不再是Configuration对象，而是ServiceRegistry对象，Configuration对象将通过ServiceRegistry对象获取配置信息。
</p>
<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	使用了Builder模式创建一个ServiceRegistry对象，可以看到源码<span style="margin:0px;padding:0px;">org.hibernate.service.ServiceRegistryBuilder这个类。</span> 
</p>
<p style="margin:10px auto;padding:0px;font-family:Verdana, Arial, Helvetica, sans-serif;font-size:14px;white-space:normal;background-color:#FFFFFF;">
	<span style="margin:0px;padding:0px;">具体获取如下：</span> 
</p>
<div class="cnblogs_code" style="margin:5px 0px;padding:5px;background-color:#F5F5F5;border:1px solid #CCCCCC;overflow:auto;white-space:normal;font-family:&quot;">
	<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;">
		<br />
	</div>
<pre style="margin-top:0px;margin-bottom:0px;padding:0px;white-space:pre-wrap;word-wrap:break-word;font-family:&quot;"><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 1</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">import</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> org.hibernate.HibernateException; </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 2</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">import</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> org.hibernate.SessionFactory; </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 3</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">import</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> org.hibernate.cfg.Configuration; </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 4</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">import</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> org.hibernate.service.ServiceRegistry; </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 5</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">import</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> org.hibernate.service.ServiceRegistryBuilder; </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 6</span> <span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 7</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">public</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">class</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> Test { </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 8</span> <span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;"> 9</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">private</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">static</span> Configuration configuration = <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">null</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">; </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">10</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">private</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">static</span> SessionFactory sessionFactory = <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">null</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">; </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">11</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">private</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">static</span> ServiceRegistry serviceRegistry = <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">null</span><span style="margin:0px;padding:0px;line-height:1.5 !important;">; </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">12</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">public</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">static</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">void</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> main(String[] args) { </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">13</span> <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">try</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> { </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">14</span> configuration = <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">new</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> Configuration().configure(); </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">15</span> serviceRegistry = <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">new</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry(); </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">16</span> sessionFactory =<span style="margin:0px;padding:0px;line-height:1.5 !important;"> configuration.buildSessionFactory(serviceRegistry); </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">17</span> } <span style="margin:0px;padding:0px;color:#0000FF;line-height:1.5 !important;">catch</span><span style="margin:0px;padding:0px;line-height:1.5 !important;"> (HibernateException e) { </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">18</span> <span style="margin:0px;padding:0px;line-height:1.5 !important;"> e.printStackTrace(); </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">19</span> <span style="margin:0px;padding:0px;line-height:1.5 !important;"> } </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">20</span> <span style="margin:0px;padding:0px;line-height:1.5 !important;"> } </span><span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">21</span> <span style="margin:0px;padding:0px;color:#008080;line-height:1.5 !important;">22</span> }</pre>
	<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px;padding:0px;">
		<br />
	</div>
</div>