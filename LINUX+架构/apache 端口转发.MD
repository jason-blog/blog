在部署Java Web应用时，通常会把应用部署在一个Web容器（如Tomcat），再部署一个HTTP服务器转发请求。
<div style="line-height:28px;">
	例如部署Tomcat监听8080端口，部署Apache Httpd监听80端口，再转发给tomcat的8080端口。
</div>
<div style="line-height:28px;">
	这样做的好处是可以灵活调整应用部署结构，后端容器增加、减少、更换端口时仅需调整HTTP服务器的转发规则。HTTP服务器还可以处理一些特殊的逻辑，如静态资源展示、访问日志记录等。
</div>
<div style="line-height:28px;">
	<br style="line-height:28px;" />
</div>
<div style="line-height:28px;">
	由此带来的另一个好处是，可以在一台服务器上部署多个应用和配置多个域名，对于访问者来说感觉像访问两个不同的网站一样。
</div>
<div style="line-height:28px;">
	在示例中我启动了两个Tomcat实例，分别监听8080和8081端口，部署两个不同的应用。然后将两个域名均指向这台机器的ip，Apache即是通过访问者使用的域名来执行不同的转发。
</div>
<div style="line-height:28px;">
	<br style="line-height:28px;" />
</div>
<div style="line-height:28px;">
	在conf/httpd.conf中添加以下配置
</div>
<div style="line-height:28px;">
<pre class="prettyprint" style="line-height:28px;white-space:pre-wrap;padding:2px;border:1px solid #888888;">
	<p style="line-height:28px;margin-top:0px;margin-bottom:10px;padding:0px;">
		<span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">NameVirtualHost</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">*:</span><span class="lit" style="line-height:28px;color:#006666;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">80</span> <span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">&lt;</span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">VirtualHost</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">*:</span><span class="lit" style="line-height:28px;color:#006666;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">80</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">&gt;</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">ServerName</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> www</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">s025</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">org</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">ServerAlias</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> s025</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">org </span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">*.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">s025</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">org</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">ProxyPass</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">/</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> http</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">:</span><span class="com" style="line-height:28px;color:#880000;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">//localhost:8080/</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">ProxyPassReverse</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">/</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> http</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">:</span><span class="com" style="line-height:28px;color:#880000;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">//localhost:8080/</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">ErrorLog</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> logs</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">/</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">s025</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">org</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">-</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">error_log</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">CustomLog</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> logs</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">/</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">s025</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">org</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">-</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">access_log common</span> <span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">&lt;</span><span class="str" style="line-height:28px;color:#008800;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">/VirtualHost&gt;</span> <span class="str" style="line-height:28px;color:#008800;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">&lt;VirtualHost *:80&gt;</span> <span class="str" style="line-height:28px;color:#008800;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> ServerName www.gaofeihang.cn</span> <span class="str" style="line-height:28px;color:#008800;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> ServerAlias gaofeihang.cn *.gaofeihang.cn</span> <span class="str" style="line-height:28px;color:#008800;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> ProxyPass /</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> http</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">:</span><span class="com" style="line-height:28px;color:#880000;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">//localhost:8081/</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">ProxyPassReverse</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">/</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> http</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">:</span><span class="com" style="line-height:28px;color:#880000;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">//localhost:8081/</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">ErrorLog</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> logs</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">/</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">gaofeihang</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">cn</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">-</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">error_log</span> <span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> </span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">CustomLog</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;"> logs</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">/</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">gaofeihang</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">.</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">cn</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">-</span><span class="pln" style="line-height:28px;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">access_log common</span> <span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">&lt;/</span><span class="typ" style="line-height:28px;color:#660066;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">VirtualHost</span><span class="pun" style="line-height:28px;color:#666600;font-family:monospace;font-size:16px;white-space:pre-wrap;background-color:#FFFFFF;">&gt;</span>
	</p>
</pre>
第一行声明使用的转发规则是NameVirtualHost（通过主机名来判断），后面分别配置需要转发的域名和转发的目标地址。
</div>
<div style="line-height:28px;">
<pre class="prettyprint" style="line-height:28px;white-space:pre-wrap;padding:2px;border:1px solid #888888;"></pre>
<span style="line-height:28px;"></span><span style="line-height:28px;font-family:monospace;white-space:pre;"></span>
</div>