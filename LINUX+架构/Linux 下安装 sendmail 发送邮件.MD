<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">一、 Sendmail安装&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">在CentOS下，sendmail一般默认是随操作系统一起安装的。如果安装系统时没有安装sendmail服务，手动安装sendmail也很简单：&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;"># yum install -y sendmail&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;"># yum install -y sendmail-cf&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">二、 Senmail的SMTP认证配置（不需要认证的可忽略此步）&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">首先确认saslauthd服务是否安装或启动。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">安装saslauthd服务：# yum install -y saslauthd&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">启动saslauthd服务：# service saslauthd start&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">三、 使用带附件的功能，则还需要安装sharutils&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">#yum install sharutils&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">四、 配置Senmail的SMTP认证&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;"># vi /etc/mail/sendmail.mc&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp; 1. dnl TRUST_AUTH_MECH(`EXTERNAL DIGEST-MD5 CRAM-MD5 LOGIN PLAIN')dnl&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp;&nbsp; 2. dnl define(`confAUTH_MECHANISMS', `EXTERNAL GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN PLAIN')dnl</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">将上面两行的dnl去掉。在sendmail文件中，dnl表示该行为注释行，是无效的，因此通过去除行首的dnl字符串可以开启相应的设置行。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">五、设置Sendmail服务的网络访问权限&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;"># vi /etc/mail/sendmail.mc&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp; 1. DAEMON_OPTIONS(`Port=smtp,Addr=127.0.0.1, Name=MTA')dnl&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">将127.0.0.1改为0.0.0.0，意思是任何主机都可以访问Sendmail服务。如果仅让某一个网段能够访问到Sendmail服务，将127.0.0.1改为形如192.168.1.0/24的一个特定网段地址。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">六、 生成Sendmail配置文件&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">Sendmail的配置文件由m4来生成，m4工具在sendmail-cf包中。如果系统无法识别m4命令，说明sendmail-cf软件包没有安装。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">生成Sendmail的配置文件：&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp; 1. m4 /etc/mail/sendmail.mc &gt; /etc/mail/sendmail.cf &nbsp;&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">需要重启Sendmail才能使配置文件生效。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">七、 Sendmail邮件域名配置&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">配置sendmail使用合法的域名分两步，修改sendmail的配置文件和添加域名MX记录。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">sendmail可以直接使用 “-r account@domain.com” 参数来以任意源地址发送邮件，但目前主流的邮箱都会将源地址和反向解析IP进行比较，如果解析不到或是解析的IP不匹配，轻则将邮件直接归为SPAM，严重的就直接拒绝接收。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">MX记录（Mail Exchanger Record）主要是接收邮件时使用，即当投递一封新邮件时，会查询收件人域名的MX记录，然后通过MX记录得到的IP地址进行投递。同时邮件厂商在接收邮件的时候也会将源地址和MX记录进行比较，作为垃圾邮件的判断标准之一。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">第一步：添加域名&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">(1) 将域名加入到local-host-names文件&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;"># vi /etc/mail/local-host-names，添加&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp; 1. yaokj.com&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">(2) 修改submit.cf文件&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;"># vi /etc/mail/submit.cf，找到行 #Dj$w.Foo.COM，修改为&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp; 1. Djyaokj.com&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">至此，sendmail邮件命名配置完毕，重启sendmail使配置生效。&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;"># service sendmail restart&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">八、测试：&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp;&nbsp;&nbsp; 1.如何写一般的邮件： mail test@126.com&nbsp; Cc 编辑抄送对象，Subject:邮件主题,输入回车，邮件正文后，按Ctrl-D结束&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp;&nbsp; 2.快速发送方式： echo “邮件正文” | mail -s 邮件主题 test@126.com&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp;&nbsp; 3.以文件内容作为邮件正文来发送： mail -s test test@126.com &lt; test.txt&nbsp;</span><br style="box-sizing:inherit;-webkit-tap-highlight-color:transparent;color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;" />
<span style="color:#3D464D;font-family:&quot;font-size:16px;white-space:normal;background-color:#F8F8F8;">&nbsp;&nbsp;&nbsp; 4.发送带附件的邮件：# mail -s Test -a test.txt yaokangjun@foxmail.com 输入回车，邮件正文后 按Ctrl-D结束&nbsp;</span>